title: Swagger definitions for Inspire service metadata (or capabilities)
doc:
  Describes the operations of the Download/View Service and shall contain as a minimum a description of the data
  exchanged and the network address of each operation.
        $ref: 'https://raw.githubusercontent.com/benoitdavidfr/geoapi-inspireoai/master/metadata.yaml#/definitions/metadata'
        $ref: 'https://raw.githubusercontent.com/benoitdavidfr/geoapi-inspireoai/master/operationcap.yaml#/definitions/operationCap'
journal: |
  18/2/2018:
    pertial definition, to be completed
definitions:
  downloadCapabilities:
    type: object
    description: >-
      Response of the Get Download Service Metadata request (Annex IV Part A Section 2.2)
    properties:
      serviceMetadata:
        description: >-
          Download Service Metadata (2.2.1.)
          At least contain the INSPIRE metadata elements of the Download Service.
        $ref: 'https://raw.githubusercontent.com/benoitdavidfr/geoapi-inspireoai/master/metadata.yaml#/definitions/metadata'
      operationsMetadata:
        description: >-
          Operations Metadata (2.2.2.)
          Provides metadata about the operations implemented by the Download Service. It shall at least provide a
          description of each operation, including as a minimum a description of the data exchanged and the network
          address.
        $ref: '#/definitions/operationCap'
      supportedLanguages:
        description: >-
          Supported languages (2.2.3.b)
          The list of the natural languages supported by the Service coded using ISO 639-2 alpha-3.
          
          The response language (2.2.3.a) is given by the Content-Language HTTP response header
        type: array
        items: {type: string}
        example: ['fre','eng']
      datasetMetadata:
        description: >-
          Spatial Data Sets Metadata (2.2.4.)
          The INSPIRE metadata elements of the available Spatial Data Sets shall be provided. In addition,
          for each Spatial Data Set, the list of those Coordinate Reference Systems referred to in Regulation (EU)
          No 1089/2010 which are available shall also be provided.
          
          This property is structured with an array of items, one per available dataset, each one defined by the URI
          of the dataset pointing to its metadata, and the list of available CRS, each one defined by an URI
        type: array
        items:
          description: one item per dataset
          type: object
          properties:
            uri: {type: string}
            crs:
              type: array
              items:
                description: Each item is an URI defining a CRS in which the dataset is available
                type: string
                
  viewCapabilities:
    type: object
    description: >-
      Response of the Get View Service Metadata request (Annex III Part A Section 2.2)
    properties:
      serviceMetadata:
        description: >-
          View Service Metadata (2.2.1.)
          At least contain the INSPIRE metadata elements of the View Service.
        $ref: 'https://raw.githubusercontent.com/benoitdavidfr/geoapi-inspireoai/master/metadata.yaml#/definitions/metadata'
      operationsMetadata:
        description: >-
          Operations Metadata (2.2.2.)
          Describes the operations of the View Service and shall contain as a minimum a description of the data
          exchanged and the network address of each operation.
        $ref: '#/definitions/operationCap'
      supportedLanguages:
        description: >-
          Supported languages (2.2.3.b)
          The list of the natural languages supported by the Service coded using ISO 639-2 alpha-3.
          
          The response language (2.2.3.a) is given by the Content-Language HTTP response header
        type: array
        items: {type: string}
        example: ['fre','eng']
      layersMetadata:
        description: >-
          Layers Metadata  (2.2.4.)
        type: array
        items:
          description: one item per layer
          type: object
          properties:
            title:
              description: >-
                Resource Title
                The title of the layer, used for human communication, for presentation of the layer, e.g. in a menu
              type: string
            abstract:
              description: >-
                Resource Abstract
                Layer abstract
              type: string
            keywords:
              description: >-
                Keyword
                Layer Additional keywords
              type: array
              items: {type: string}
            bbox:
              description: >-
                Geographic Bounding Box
                The minimum bounding rectangle in all supported Coordinate Reference Systems of the area covered by the
                layer
              type: array
              items: {type: string}
              
  operationCap:
    type: object
    description: >-
      extract of the swagger structure for the service
    properties:
      swagger: { type: string }
      host: { type: string }
      basePath: { type: string }
      schemes: { type: array, items: { type: string } }
      paths:
        type: array
        items:
          type: array
          items:
            type: object
            properties:
              pathTemplate: { type: string }
              httpVerb: { type: string }
              summary: { type: string }
              description: { type: string }
              operationId: { type: string }
              produces: { type: array, items: { type: string } }
              parameters:
                type: array
                items:
                  type: object
                  properties: 
                    name: { type: string }
                    in: { type: string }
                    description: { type: string }
                    required: { type: boolean }
                    type: { type: string }
              responses:
                type: array
                items:
                  type: object
                  properties: 
                    httpStatusCode: { type: string }
                    description: { type: string }
                    schema: { type: object }
    example:
      swagger: "2.0"
      host: "virtserver.swaggerhub.com"
      basePath: "/benoitdavidfr/inspireappli/0.1.0"
      schemes:
      - "https"
      - "http"
      paths:
        -:
          -:
            pathTemplate: "/download/{dsid}"
            httpVerb: "get"
            summary: "Get Download Service Metadata"
            description: "Provides all necessary information about the service, the available\
              \ Spatial Data Sets, and describes the service capabilities. (Annex IV, Part\
              \ A, Section 2)"
            operationId: "getDownloadServiceMetadata"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            responses:
              -:
                httpStatusCode: "200"
                description: "the service metadata"
                schema:
                  $ref: "#/definitions/downloadCapabilities"
        /download/{dsid}/describe:
          get:
            tags:
            - "download service"
            summary: "Describe Spatial Data Set"
            description: "Returns the description of all the types of Spatial Objects contained\
              \ in the Spatial Data Set. (Annex IV, Part A, Section 4)"
            operationId: "describeSpatialDataSet"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            responses:
              200:
                description: "description of all the types of Spatial Objects"
                schema:
                  type: "array"
                  items:
                    $ref: "#/definitions/sotDescription"
        /download/{dsid}/get:
          get:
            tags:
            - "download service"
            summary: "Get Spatial Data Set"
            description: "Retrieves of a Spatial Data Set. (Annex IV, Part A, Section 3)\n\
              \  The only format provided is GeoJSON.\n  The only CRS proposed is ETRS89\
              \ or equivalent CRS over-seas."
            operationId: "getSpatialDataSet"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            responses:
              200:
                description: "a GeoJSON FeatureCollection with the features of the spatial\
                  \ data set"
                schema:
                  $ref: "#/definitions/FeatureCollection"
        /download/{dsid}/describe/{sot}:
          get:
            tags:
            - "download service"
            summary: "Describe Spatial Object Type"
            description: "Returns the description of the specified Spatial Objects types\
              \ (Annex IV, Part B, Section 8)"
            operationId: "describeSpatialObjectType"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            - name: "sot"
              in: "path"
              description: "list of names of the Spatial Object Types"
              required: true
              type: "array"
              items:
                type: "string"
              collectionFormat: "csv"
            responses:
              200:
                description: "description of the specified Spatial Objects types"
                schema:
                  type: "array"
                  items:
                    $ref: "#/definitions/sotDescription"
        /download/{dsid}/get/{sot}:
          get:
            tags:
            - "download service"
            summary: "Get Spatial Object"
            description: "Retrieval of Spatial Objects based upon a query. (Annex IV, Part\
              \ B, Section 7)"
            operationId: "getSpatialObject"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            - name: "sot"
              in: "path"
              description: "list of names of the Spatial Object Types"
              required: true
              type: "array"
              items:
                type: "string"
              collectionFormat: "csv"
            responses:
              200:
                description: "a GeoJSON FeatureCollection with the selected features of\
                  \ the spatial data set"
                schema:
                  $ref: "#/definitions/FeatureCollection"
