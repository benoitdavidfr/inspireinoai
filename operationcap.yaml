title: Swagger definition for Inspire service metadata (ou capabilities)
doc:
  Describes the operations of the Download/View Service and shall contain as a minimum a description of the data
  exchanged and the network address of each operation.
journal: |
  18/2/2018:
    pertial definition, to be completed
definitions:
  operationCap:
    type: object
    description: >-
      extract of the swagger structure for the service
    properties:
      swagger: { type: string }
      host: { type: string }
      basePath: { type: string }
      schemes: { type: array, items: { type: string } }
      paths:
        type: array
        items:
          type: array
          items:
            type: object
            properties:
              pathTemplate: { type: string }
              httpVerb: { type: string }
              summary: { type: string }
              description: { type: string }
              operationId: { type: string }
              produces: { type: array, items: { type: string } }
              parameters:
                type: array
                items:
                  type: object
                  properties: 
                    name: { type: string }
                    in: { type: string }
                    description: { type: string }
                    required: { type: boolean }
                    type: { type: string }
              responses:
                type: array
                items:
                  type: object
                  properties: 
                    httpStatusCode: { type: string }
                    description: { type: string }
                    schema: { type: object }
    example:
      swagger: "2.0"
      host: "virtserver.swaggerhub.com"
      basePath: "/benoitdavidfr/inspireappli/0.1.0"
      schemes:
      - "https"
      - "http"
      paths:
        -:
          -:
            pathTemplate: "/download/{dsid}"
            httpVerb: "get"
            summary: "Get Download Service Metadata"
            description: "Provides all necessary information about the service, the available\
              \ Spatial Data Sets, and describes the service capabilities. (Annex IV, Part\
              \ A, Section 2)"
            operationId: "getDownloadServiceMetadata"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            responses:
              -:
                httpStatusCode: "200"
                description: "the service metadata"
                schema:
                  $ref: "#/definitions/downloadCapabilities"
        /download/{dsid}/describe:
          get:
            tags:
            - "download service"
            summary: "Describe Spatial Data Set"
            description: "Returns the description of all the types of Spatial Objects contained\
              \ in the Spatial Data Set. (Annex IV, Part A, Section 4)"
            operationId: "describeSpatialDataSet"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            responses:
              200:
                description: "description of all the types of Spatial Objects"
                schema:
                  type: "array"
                  items:
                    $ref: "#/definitions/sotDescription"
        /download/{dsid}/get:
          get:
            tags:
            - "download service"
            summary: "Get Spatial Data Set"
            description: "Retrieves of a Spatial Data Set. (Annex IV, Part A, Section 3)\n\
              \  The only format provided is GeoJSON.\n  The only CRS proposed is ETRS89\
              \ or equivalent CRS over-seas."
            operationId: "getSpatialDataSet"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            responses:
              200:
                description: "a GeoJSON FeatureCollection with the features of the spatial\
                  \ data set"
                schema:
                  $ref: "#/definitions/FeatureCollection"
        /download/{dsid}/describe/{sot}:
          get:
            tags:
            - "download service"
            summary: "Describe Spatial Object Type"
            description: "Returns the description of the specified Spatial Objects types\
              \ (Annex IV, Part B, Section 8)"
            operationId: "describeSpatialObjectType"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            - name: "sot"
              in: "path"
              description: "list of names of the Spatial Object Types"
              required: true
              type: "array"
              items:
                type: "string"
              collectionFormat: "csv"
            responses:
              200:
                description: "description of the specified Spatial Objects types"
                schema:
                  type: "array"
                  items:
                    $ref: "#/definitions/sotDescription"
        /download/{dsid}/get/{sot}:
          get:
            tags:
            - "download service"
            summary: "Get Spatial Object"
            description: "Retrieval of Spatial Objects based upon a query. (Annex IV, Part\
              \ B, Section 7)"
            operationId: "getSpatialObject"
            produces:
            - "application/json"
            parameters:
            - name: "dsid"
              in: "path"
              description: "ID of the dataset"
              required: true
              type: "string"
            - name: "sot"
              in: "path"
              description: "list of names of the Spatial Object Types"
              required: true
              type: "array"
              items:
                type: "string"
              collectionFormat: "csv"
            responses:
              200:
                description: "a GeoJSON FeatureCollection with the selected features of\
                  \ the spatial data set"
                schema:
                  $ref: "#/definitions/FeatureCollection"
